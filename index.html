<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Kodak sp360 4k web client</title>
<script>
'use strict';
window.conn = null;
window.client_name = 'browser_client';
window.addEventListener("load", function () {
	conn = new WebSocket("ws://"+window.location.hostname+":8081");
	conn.onopen = function () {
		console.log("Connection opened");
		conn.send(JSON.stringify({
			cmd: 'set_name',
			client_name: client_name,
			id: 10000,
		}));
		document.getElementById("form").onsubmit = function (event) {
			var msg = document.getElementById("msg");
				if (msg.value)
					conn.send(msg.value);
				msg.value = "";
				event.preventDefault();
		};
	};
	conn.onclose = function () {
		console.log("Connection closed");
	};
	conn.onerror = function () {
		console.error("Connection error");
	};
	conn.onmessage = function (event) {
		var div = document.createElement("div");
		div.textContent = event.data;
		document.body.appendChild(div);
	};
})
</script>
</head><body>
<form id="form">
	Message: <input size="50" id="msg"> <input type="submit" value="Submit">
</form>
</body></html>
